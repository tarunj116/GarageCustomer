"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getIsVersionRegisteredAndDifferent = exports.registerUploadyContextVersion = exports.getRegisteredVersion = exports.getVersion = exports.GLOBAL_VERSION_SYM = void 0;

var _shared = require("@rpldy/shared");

const GLOBAL_VERSION_SYM = Symbol.for("_rpldy-version_");
exports.GLOBAL_VERSION_SYM = GLOBAL_VERSION_SYM;

const getVersion = () => "0.13.2" || "";

exports.getVersion = getVersion;

const getRegisteredVersion = () => {
  /* istanbul ignore next */
  const global = (0, _shared.hasWindow)() ? window : process; // $FlowIgnore

  return global[GLOBAL_VERSION_SYM];
};

exports.getRegisteredVersion = getRegisteredVersion;

const registerUploadyContextVersion = () => {
  const global = (0, _shared.hasWindow)() ? window : process; //$FlowIgnore

  global[GLOBAL_VERSION_SYM] = getVersion();
};

exports.registerUploadyContextVersion = registerUploadyContextVersion;

const getIsVersionRegisteredAndDifferent = () => {
  const registeredVersion = getRegisteredVersion();
  return !!registeredVersion && registeredVersion !== getVersion();
};

exports.getIsVersionRegisteredAndDifferent = getIsVersionRegisteredAndDifferent;